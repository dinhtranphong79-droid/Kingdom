<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>TÃ i khoáº£n</title>

<style>
:root{
  --bg:#f5f7fb;
  --card:#ffffff;
  --accent:#2563eb;
  --muted:#6b7280;
}
*{box-sizing:border-box;font-family:Inter,Arial,sans-serif}
body{
  margin:0;padding:20px;background:var(--bg);
  display:flex;justify-content:center;
}
.wrap{
  width:100%;max-width:800px;background:var(--card);
  padding:20px;border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,0.06);
}
.status{
  padding:10px 12px;background:#eef4ff;
  border-radius:10px;margin-bottom:15px;font-size:14px;
}
button{
  padding:8px 14px;border:none;border-radius:8px;
  background:var(--accent);color:white;
  font-weight:600;cursor:pointer;margin-right:6px;
}
.acc{
  padding:12px;background:#f8fafc;border-radius:10px;
  margin-bottom:10px;cursor:pointer;
  border:1px solid #e5e7eb;transition:0.25s;
}
.acc:hover{background:#e2e8f0}
.acc.disabled{
  opacity:0.55;pointer-events:none;
}
.acc-title{font-weight:700}
.small{font-size:13px;color:#555}
</style>
</head>

<body>
<div class="wrap">

<h2>TÃ i khoáº£n</h2>

<div id="authStatus" class="status">Äang kiá»ƒm tra Ä‘Äƒng nháº­pâ€¦</div>

<button onclick="logout()" style="background:#ef4444">ÄÄƒng xuáº¥t</button>

<h3>Danh sÃ¡ch 9 account</h3>
<div id="accList"></div>

</div>


<script>
/* ================= BIáº¾N TOÃ€N Cá»¤C ================= */
let FB = null;
let auth = null;

/* ================= CHá»œ FIREBASE ================= */
function waitForFB(){
  if(window.__FB){
    init(window.__FB);
    return;
  }
  if(window.parent && window.parent.__FB){
    init(window.parent.__FB);
    return;
  }
  setTimeout(waitForFB, 100);
}

function init(_FB){
  FB = _FB;
  auth = FB.auth;
  initAuth();
}

waitForFB();

/* ================= Cáº¤U HÃŒNH ACCOUNT ================= */
const DEFAULT_PASSWORD = "1234567";

const ACCOUNTS = [
  "minhlanne@dolvar.app",
  "minhlannho@dolvar.app",
  "dolvar@dolvar.app",
  "dolvarash@dolvar.app",
  "dolvaraegis@dolvar.app",
  "dolvarreign@dolvar.app",
  "dolvarreaper@dolvar.app",
  "dolvartroth@dolvar.app",
  "dolvarbastion@dolvar.app"
];

const accList = document.getElementById("accList");

/* ================= RENDER ================= */
function renderAccounts(locked){
  accList.innerHTML = "";
  ACCOUNTS.forEach(email=>{
    const div = document.createElement("div");
    div.className = "acc" + (locked ? " disabled":"");
    div.innerHTML = `
      <div class="acc-title">${email}</div>
      <div class="small">Click Ä‘á»ƒ Ä‘Äƒng nháº­p</div>
    `;
    div.onclick = ()=> loginAccount(email);
    accList.appendChild(div);
  });
}

/* ================= LOGIN ================= */
async function loginAccount(email){
  if(auth.currentUser){
    alert("ğŸ”’ Äang Ä‘Äƒng nháº­p:\n" + auth.currentUser.email);
    return;
  }
  try{
    await FB.signInWithEmailAndPassword(auth, email, DEFAULT_PASSWORD);
  }catch(err){
    if(err.code === "auth/user-not-found"){
      await FB.createUserWithEmailAndPassword(auth, email, DEFAULT_PASSWORD);
    }else{
      alert(err.message);
    }
  }
}

/* ================= LOGOUT ================= */
function logout(){
  if(confirm("ÄÄƒng xuáº¥t account hiá»‡n táº¡i?")){
    FB.signOut(auth);
  }
}

/* ================= AUTH STATE ================= */
function initAuth(){
  FB.onAuthStateChanged(auth, user=>{
    const s = document.getElementById("authStatus");

    if(!user){
      s.innerHTML = "âŒ ChÆ°a Ä‘Äƒng nháº­p";
      renderAccounts(false);
      return;
    }

    s.innerHTML = `
      âœ… ÄÃ£ Ä‘Äƒng nháº­p<br>
      <b>${user.email}</b><br>
      UID: ${user.uid}
    `;
    renderAccounts(true);
  });
}
</script>


</body>
</html>
